"use strict";

var _bodyParser = require("body-parser");

var _bodyParser2 = _interopRequireDefault(_bodyParser);

var _express = require("express");

var _express2 = _interopRequireDefault(_express);

var _mongoose = require("mongoose");

var _mongoose2 = _interopRequireDefault(_mongoose);

var _path = require("path");

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PORT = process.env.PORT || 3000;
var PUBLIC_PATH = _path2.default.resolve(__dirname, '../public');

var app = (0, _express2.default)();

// Connect mongoose
_mongoose2.default.Promise = global.Promise;
_mongoose2.default.connect("mongodb://localhost/rssenal", { useMongoClient: true, promiseLibrary: global.Promise });

// Setup body-parser
app.use(_bodyParser2.default.urlencoded({ extended: true }));
app.use(_bodyParser2.default.json());

app.use(_express2.default.static(PUBLIC_PATH));

// Setup the routes
app.use("/", require("./routes"));

// Allow all URI's; handle by react router
app.get('*', function (req, res) {
    res.sendFile(_path2.default.join(PUBLIC_PATH, '/index.html'));
});

app.listen(PORT);

// Output the server listening message 
console.log("-".repeat(50));
console.log("--- rssenal server listening on http://127.0.0.1:" + PORT);
console.log("-".repeat(50));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2ZXIvc2VydmVyLmpzIl0sIm5hbWVzIjpbIlBPUlQiLCJwcm9jZXNzIiwiZW52IiwiUFVCTElDX1BBVEgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiYXBwIiwiUHJvbWlzZSIsImdsb2JhbCIsImNvbm5lY3QiLCJ1c2VNb25nb0NsaWVudCIsInByb21pc2VMaWJyYXJ5IiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwianNvbiIsInN0YXRpYyIsInJlcXVpcmUiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kRmlsZSIsImpvaW4iLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwicmVwZWF0Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxJQUFNQSxPQUFPQyxRQUFRQyxHQUFSLENBQVlGLElBQVosSUFBb0IsSUFBakM7QUFDQSxJQUFNRyxjQUFjLGVBQUtDLE9BQUwsQ0FBYUMsU0FBYixFQUF3QixXQUF4QixDQUFwQjs7QUFFQSxJQUFNQyxNQUFNLHdCQUFaOztBQUVBO0FBQ0EsbUJBQVNDLE9BQVQsR0FBbUJDLE9BQU9ELE9BQTFCO0FBQ0EsbUJBQVNFLE9BQVQsQ0FBaUIsNkJBQWpCLEVBQWdELEVBQUVDLGdCQUFnQixJQUFsQixFQUF3QkMsZ0JBQWdCSCxPQUFPRCxPQUEvQyxFQUFoRDs7QUFFQTtBQUNBRCxJQUFJTSxHQUFKLENBQVEscUJBQVdDLFVBQVgsQ0FBc0IsRUFBQ0MsVUFBVSxJQUFYLEVBQXRCLENBQVI7QUFDQVIsSUFBSU0sR0FBSixDQUFRLHFCQUFXRyxJQUFYLEVBQVI7O0FBRUFULElBQUlNLEdBQUosQ0FBUSxrQkFBUUksTUFBUixDQUFlYixXQUFmLENBQVI7O0FBRUE7QUFDQUcsSUFBSU0sR0FBSixDQUFRLEdBQVIsRUFBYUssUUFBUSxVQUFSLENBQWI7O0FBRUE7QUFDQVgsSUFBSVksR0FBSixDQUFRLEdBQVIsRUFBYSxVQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBWTtBQUNyQkEsUUFBSUMsUUFBSixDQUFhLGVBQUtDLElBQUwsQ0FBVW5CLFdBQVYsRUFBdUIsYUFBdkIsQ0FBYjtBQUNILENBRkQ7O0FBSUFHLElBQUlpQixNQUFKLENBQVd2QixJQUFYOztBQUVBO0FBQ0F3QixRQUFRQyxHQUFSLENBQVksSUFBSUMsTUFBSixDQUFXLEVBQVgsQ0FBWjtBQUNBRixRQUFRQyxHQUFSLENBQVksc0RBQXNEekIsSUFBbEU7QUFDQXdCLFFBQVFDLEdBQVIsQ0FBWSxJQUFJQyxNQUFKLENBQVcsRUFBWCxDQUFaIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBib2R5UGFyc2VyIGZyb20gXCJib2R5LXBhcnNlclwiO1xuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XG5jb25zdCBQVUJMSUNfUEFUSCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9wdWJsaWMnKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG4vLyBDb25uZWN0IG1vbmdvb3NlXG5tb25nb29zZS5Qcm9taXNlID0gZ2xvYmFsLlByb21pc2U7XG5tb25nb29zZS5jb25uZWN0KFwibW9uZ29kYjovL2xvY2FsaG9zdC9yc3NlbmFsXCIsIHsgdXNlTW9uZ29DbGllbnQ6IHRydWUsIHByb21pc2VMaWJyYXJ5OiBnbG9iYWwuUHJvbWlzZSB9KTtcblxuLy8gU2V0dXAgYm9keS1wYXJzZXJcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHtleHRlbmRlZDogdHJ1ZX0pKTtcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKFBVQkxJQ19QQVRIKSk7XG5cbi8vIFNldHVwIHRoZSByb3V0ZXNcbmFwcC51c2UoXCIvXCIsIHJlcXVpcmUoXCIuL3JvdXRlc1wiKSk7XG5cbi8vIEFsbG93IGFsbCBVUkknczsgaGFuZGxlIGJ5IHJlYWN0IHJvdXRlclxuYXBwLmdldCgnKicsIChyZXEsIHJlcyk9PntcbiAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKFBVQkxJQ19QQVRILCAnL2luZGV4Lmh0bWwnKSk7XG59KTtcblxuYXBwLmxpc3RlbihQT1JUKTtcblxuLy8gT3V0cHV0IHRoZSBzZXJ2ZXIgbGlzdGVuaW5nIG1lc3NhZ2UgXG5jb25zb2xlLmxvZyhcIi1cIi5yZXBlYXQoNTApKTtcbmNvbnNvbGUubG9nKFwiLS0tIHJzc2VuYWwgc2VydmVyIGxpc3RlbmluZyBvbiBodHRwOi8vMTI3LjAuMC4xOlwiICsgUE9SVClcbmNvbnNvbGUubG9nKFwiLVwiLnJlcGVhdCg1MCkpOyJdfQ==